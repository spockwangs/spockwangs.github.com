<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/stylesheets/default.css" />
    <title>比特操纵技巧</title>
  </head>
  <body>
    <div id="doc">
      <header class="header">
        <h1 class="title">judewang.github.com</h1>
        <div id="main-nav">
          <ul class="nav">
            <li class="nav-tab">
              <a href="/">Home</a>
            </li>
            <li class="nav-tab">
              <a href="/">Archives</a>
            </li>
            <li class="nav-tab">
              <a href="/">About</a>
            </li>
          </ul>
        </div>
      </header>
      
      <div id="bd">
        <div class="grid-left">
          <article id="article" class="article">
            <div class="article-title">比特操纵技巧</div>
            <div class="article-author">By judewang</div>
            <div class="article-date">2012-02-02</div>
            <h3>
	计算数据二进制表示中1的个数
</h3>
<p>
	比如3（11<sub>2</sub>）有2个，4（100<sub>2</sub>）有1个，0（0<sub>2</sub>）有0个。
</p>
<p>
	&nbsp;
</p>
<p>
	最直接的方法当然是每次将其右移一位，若移出的比特为1则加1。它时间复杂度正比于数据宽度。还有一种更简单的方法如下所示：
</p>
<p>
	<span style="font-family: monospace;font-size:16px;"><span style="white-space: pre-wrap;"><textarea cols="50" rows="15" name="code" class="cpp">int count_ones(unsigned int x)
{
        int sum = 0;              // Count how many ones in x.
        while (x != 0) {
                sum++;
                x = x &amp; (x-1);     // 这句是关键。
         }
         return sum;
}</textarea> </span></span></p>
<p>注意上面第6行代码是关键。它的作用是将x最右边的比特1置为0，直到x变为0。它的时间复杂度正比于x中比特1的个数。</p>
<p>&nbsp;</p>
<p>当然，还有更快的算法。我们可以将问题的答案存在一张表里，通过查表法乃解决，相当于通过空间来换取时间。比如，我们可以把一个字节的所有情况（共256个）存在一张表格中，这样我们可以每次处理一个字节，这比上面的算法要快得多，当然也要更多的空间。</p>
<p>&nbsp;</p>
<p>另见：<a href="http://www.msra.cn/Articles/ArticleItem.aspx?Guid=edb3a02b-6d5e-42c7-b2a5-4ae4a18f4254#.">智慧碰撞（求二进制数中1的个数）</a>。</p>

          </article>
        </div>

        <div class="grid-right">
          <div class="toc">
            <div class="hd">
              Table of Contents
            </div>
            <div id="toc" class="bd">
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <p class="copyright">&copy; 2013 judewang<br />All rights reserved.</p>
      </footer>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script src="/javascripts/generate_toc.js"></script>
    </div>
  </body>
</html>
