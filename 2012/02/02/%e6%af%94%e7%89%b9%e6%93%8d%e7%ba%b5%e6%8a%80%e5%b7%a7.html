<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/stylesheets/default.css" />
    <title>比特操纵技巧</title>
  </head>
  <body>
    <header class="header">
      <h1 class="title"><a href="/">Judewang's Thoughts</a></h1>
    </header>

    <nav>
      <ul>
        <li><a href="/">Archives</a></li>
        <li><a href="/about.html">About</a></li>
      </ul>
    </nav>

    <div id="main">
      <div id="content-wrapper">
        <div id="content">
          <article class="article">
  <header>
    <h1 class="title">比特操纵技巧</h1>
    <div class="meta">
      <span class="tags">
        
        <li class="tag">Programming</li>
        
      </span>
      <span class="date">2012-02-02</span>
    </div>
  </header>
  <div id="toc-wrapper" class="invisible">
    <div class="toc-header">Table of Contents</div>
    <div id="toc">
    </div>
  </div>
  <div id="article-content" class="content">
    <h3>
	计算数据二进制表示中1的个数
</h3>
<p>
	比如3（11<sub>2</sub>）有2个，4（100<sub>2</sub>）有1个，0（0<sub>2</sub>）有0个。
</p>
<p>
	&nbsp;
</p>
<p>
	最直接的方法当然是每次将其右移一位，若移出的比特为1则加1。它时间复杂度正比于数据宽度。还有一种更简单的方法如下所示：
</p>
<p>
	<span style="font-family: monospace;font-size:16px;"><span style="white-space: pre-wrap;"><textarea cols="50" rows="15" name="code" class="cpp">int count_ones(unsigned int x)
{
        int sum = 0;              // Count how many ones in x.
        while (x != 0) {
                sum++;
                x = x &amp; (x-1);     // 这句是关键。
         }
         return sum;
}</textarea> </span></span></p>
<p>注意上面第6行代码是关键。它的作用是将x最右边的比特1置为0，直到x变为0。它的时间复杂度正比于x中比特1的个数。</p>
<p>&nbsp;</p>
<p>当然，还有更快的算法。我们可以将问题的答案存在一张表里，通过查表法乃解决，相当于通过空间来换取时间。比如，我们可以把一个字节的所有情况（共256个）存在一张表格中，这样我们可以每次处理一个字节，这比上面的算法要快得多，当然也要更多的空间。</p>
<p>&nbsp;</p>
<p>另见：<a href="http://www.msra.cn/Articles/ArticleItem.aspx?Guid=edb3a02b-6d5e-42c7-b2a5-4ae4a18f4254#.">智慧碰撞（求二进制数中1的个数）</a>。</p>

  </div>
  <footer class="footer">
    
    <div class="previous">
      <a href="/2012/02/02/%25e6%259f%25a5%25e7%259c%258b%25e8%25bf%259b%25e7%25a8%258b%25e7%259a%2584%25e5%2586%2585%25e5%25ad%2598%25e4%25bd%25bf%25e7%2594%25a8%25e6%2583%2585%25e5%2586%25b5.html" title="Previous post: 查看进程的内存使用情况">«查看进程的内存使用情况</a>
    </div>
    
    
    <div class="next">
      <a href="/2012/02/02/%25e7%2594%259f%25e6%2588%2590%25e5%258f%25af%25e6%2589%25a7%25e8%25a1%258c%25e7%259a%2584%25e5%2585%25b1%25e4%25ba%25ab%25e5%25ba%2593.html" title="Next post: 生成可执行的共享库">生成可执行的共享库»</a>
    </div>
    
  </footer>
</article>

        </div>
      </div>
      <div id="sidebar">
        <div id="sidebar-wrapper">
          <h1>Tags</h1>
          <ul class="tags">
            
            <li><span class="tag"><a href="/tags/Programming/" title='Posts tagged "Programming"'>Programming</a></span>&nbsp;x&nbsp;19</li>
            
            <li><span class="tag"><a href="/tags/名言警句/" title='Posts tagged "名言警句"'>名言警句</a></span>&nbsp;x&nbsp;1</li>
            
            <li><span class="tag"><a href="/tags/Administration/" title='Posts tagged "Administration"'>Administration</a></span>&nbsp;x&nbsp;5</li>
            
            <li><span class="tag"><a href="/tags/Network/" title='Posts tagged "Network"'>Network</a></span>&nbsp;x&nbsp;3</li>
            
          </ul>
        </div>
      </div>
    </div>

    <footer id="footer">
      <p class="copyright">Copyright&nbsp;&copy;&nbsp2013 - judewang - Powered by jekyll</p>
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="/javascripts/generate_toc.js"></script>
    <script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <script type="text/javascript">
      <!-- Add Google prettify support. -->
      $(function () {
          $("pre > code").addClass("prettyprint");
      });
      </script>
    </div>
  </body>
</html>
